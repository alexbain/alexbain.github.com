
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>alexba.in</title>
  <meta name="author" content="Alex Bain">

  
  <meta name="description" content="In this post I will cover how to start a NodeJS app (lirc_web) when a RaspberryPi boots up. This ensures that if the RaspberryPi ever loses power, &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alexba.in/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/alexbain" rel="alternate" title="alexba.in" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-25918073-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">alexba.in</a></h1>
  
    <h2>A collection of thoughts on technology, cognitive science, and life.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/alexbain" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:alexba.in" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/11/02/lirc-web-nginx-and-upstart/">Running Lirc_web With Nginx and Upstart</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-02T09:50:00+00:00" pubdate data-updated="true">Nov 2<span>nd</span>, 2013</time>
        
         | <a href="/blog/2013/11/02/lirc-web-nginx-and-upstart/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In this post I will cover how to start a NodeJS app (<code>lirc_web</code>) when a RaspberryPi boots up. This ensures that if the RaspberryPi ever loses power, the <code>lirc_web</code> app will restart when the system comes online. <code>lirc_web</code> is an open source NodeJS app I wrote as part of the <a href="http://opensourceuniversalremote.com">Open Source Universal Remote</a> project. If you&#8217;d like to learn more about the project, please check out <a href="http://alexba.in/blog/2013/06/08/open-source-universal-remote-parts-and-pictures/">Open Source Universal Remote - Parts &amp; Pictures</a>.</p>

<p>To accomplish this will take three steps:</p>

<ol>
<li>Configure the hostname for the RaspberryPi</li>
<li>Install and configure Upstart</li>
<li>Install and configure NGINX</li>
</ol>


<p><strong>Note: Not all mobile devices support <code>.local</code> domains. You may still need to connect via IP.</strong></p>

<h3>Configure the hostname for the RaspberryPi</h3>

<p>If you want your RaspberryPi to be accessible on your local network via hostname, instead of always typing it&#8217;s IP address, you&#8217;ll want to install an mDNS daemon. If you&#8217;d like to learn why, I recommend reading <a href="http://www.howtogeek.com/167190/how-and-why-to-assign-the-.local-domain-to-your-raspberry-pi/">How (and Why) to Assign the .local Domain to Your Raspberry Pi</a>. The RaspberryPi supports Avahi, which can be installed with:</p>

<pre><code>sudo apt-get install avahi-daemon
</code></pre>

<p>When that finishes, try pinging <code>raspberrypi.local</code> from a different computer. Everything should just work. Next, we&#8217;ll update the hostname of the RaspberryPi to be <code>universalremote</code>. This requires three steps:</p>

<ol>
<li>Edit <code>/etc/hosts</code> and change the last line to <code>127.0.1.1 universalremote</code></li>
<li>Edit <code>/etc/hostname</code> and change the hostname to <code>universalremote</code></li>
<li>Reboot the RaspberryPi by running <code>sudo shutdown -r now</code></li>
</ol>


<p>After the RaspberryPi boots back up, you should be able to connect to the RaspberryPi via hostname (<code>http://universalremote.local</code>) or IP.</p>

<h3>Install and configure Upstart</h3>

<p>To ensure the <code>lirc_web</code> app starts when the RaspberryPi boots, we will use a tool called <a href="http://upstart.ubuntu.com">Upstart</a>. Upstart is a project from Ubuntu that simplifies writing init scripts. If you want to learn more about it, you can visit <a href="http://upstart.ubuntu.com/">http://upstart.ubuntu.com/</a> and read more. RaspbianOS does not include Upstart by default, but it can be installed to replace sysvinit with no negative consequences. Here are the commands:</p>

<pre><code>sudo apt-get install upstart
# You will be asked to type 'Yes, do as I say!'
# You may see an error about initctl being unable to connect, which will be fixed after a reboot

# Reboot the RaspberryPi
sudo shutdown -r now
</code></pre>

<p>Once the RaspberryPi reboots Upstart should be installed. Upstart configuration files are placed in <code>/etc/init</code>. You can either use the sample Upstart configuration that comes with the <code>lirc_web</code> Git repository, or you can use this example (place in <code>/etc/init/open-source-universal-remote.conf</code>):</p>

<pre><code># /etc/init/open-source-universal-remote.conf
description "universalremote.local"

start on runlevel [2345]
stop on runlevel [016]

# Restart when job dies
respawn

# Give up restart after 5 respawns in 60 seconds
respawn limit 5 60

script

  echo $$ &gt; /var/run/open-source-universal-remote.pid
  exec /usr/local/bin/node /home/pi/lirc_web/app.js 2&gt;&amp;1 &gt;&gt; /var/log/open-source-universal-remote.upstart.log

end script

pre-start script
    # Date format same as (new Date()).toISOString() for consistency
    echo "[`date -u +%Y-%m-%dT%T.%3NZ`] (sys) Starting" &gt;&gt; /var/log/open-source-universal-remote.upstart.log
end script

pre-stop script
    rm /var/run/open-source-universal-remote.pid
    echo "[`date -u +%Y-%m-%dT%T.%3NZ`] (sys) Stopping" &gt;&gt; /var/log/open-source-universal-remote.upstart.log
end script
</code></pre>

<p>After creating the Upstart script, you should be able to start the <code>lirc_web</code> project by running:</p>

<pre><code>sudo initctl start open-source-universal-remote
</code></pre>

<p>You can verify everything works by opening <code>http://universalremote.local:3000</code> (or the RaspberryPi&#8217;s IP address) in your web browser. You should see the <code>lirc_web</code> web interface.</p>

<h3>Install and Configure NGINX</h3>

<p>If you run <code>lirc_web</code> by itself it creates a basic web server on port 3000. This is fine, but it&#8217;s more convenient when an web application runs on port 80, the default port for web traffic. We&#8217;ll use the free and open source NGINX web server to accomplish this.</p>

<p>To install nginx and ensure it starts on boot, run:</p>

<pre><code>sudo apt-get install nginx
update-rc.d nginx defaults
sudo service nginx start
</code></pre>

<p>When this completes, confirm everything installed correctly by trying to  access <code>http://universalremote.local</code> in your web browser. You should see a &#8220;Welcome to nginx!&#8221; web page.</p>

<p>Next, we have to configure nginx to serve the <code>lirc_web</code> app. You can use the sample config file included in the <code>lirc_web</code> Git repository (within the config directory), or use this example:</p>

<pre><code>server {
    listen            80;
    server_name       universalremote.local;

    # Change this to the location you installed lirc_web
    root              /home/pi/lirc_web;
    index             index.html index.htm;

    access_log        /var/log/open-source-universal-remote.nginx.log;

    location / {
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_set_header X-NginX-Proxy true;

        proxy_pass http://127.0.0.1:3000/;
        proxy_redirect off;
    }
}
</code></pre>

<p>Restart nginx to pick up the new configuration with <code>sudo service nginx restart</code>.</p>

<p>Now, if you visit <code>http://universalremote.local</code> in your web browser you should now see the project running. In the future, any time you reboot the RaspberryPi <code>lirc_web</code> will start automatically.</p>

<h3>Conclusion</h3>

<p>If everything went smoothly you should now have a daemonzized version of <code>lirc_web</code> running on your RaspberryPi, which is being served via nginx over port 80. In addition, any time you restart your RaspberryPi the <code>lirc_web</code> app will start up at boot.</p>

<p>Are you interested in reading more about the Open Source Universal Remote project? Check out:</p>

<ul>
<li><a href="http://alexba.in/blog/2013/01/06/setting-up-lirc-on-the-raspberrypi/">Setting up LIRC on the RaspberryPi</a></li>
<li><a href="http://alexba.in/blog/2013/02/23/controlling-lirc-from-the-web/">Controlling LIRC from the web</a></li>
<li><a href="http://alexba.in/blog/2013/06/01/using-the-pebble-watch-to-control-your-home-theater/">Using a RaspberryPi and a Pebble Watch to control your home theater</a></li>
<li><a href="http://alexba.in/blog/2013/06/08/open-source-universal-remote-parts-and-pictures/">Open Source Universal Remote - Parts &amp; Pictures</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/21/lirc-web-v0-0-5/">Lirc_web v0.0.5</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-08-21T10:25:00+00:00" pubdate data-updated="true">Aug 21<span>st</span>, 2013</time>
        
         | <a href="/blog/2013/08/21/lirc-web-v0-0-5/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve updated the <code>lirc_web</code> project (available at <a href="http://github.com/alexbain/lirc_web">http://github.com/alexbain/lirc_web</a>) to v0.0.5. This version fixes a bug related to the <a href="https://npmjs.org/package/swig">swig</a> npm module that was causing an error when trying to view the project in a browser.</p>

<p>If you were encountering a JavaScript error after trying to install <code>lirc_web</code> this should fix it. Thanks to the folks that reported this.</p>

<p>Please let me know if you encounter any other errors!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/08/open-source-universal-remote-parts-and-pictures/">Open Source Universal Remote - Parts &amp; Pictures</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-08T16:17:00+00:00" pubdate data-updated="true">Jun 8<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/06/08/open-source-universal-remote-parts-and-pictures/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="/images/posts/protoboard_v1/protoboard_v1_installed.jpg"><img src="/images/posts/protoboard_v1/thumb_protoboard_v1_installed.jpg" class="center" /></a></p>

<p>This past weekend I converted my <a href="http://opensourceuniversalremote.com">Open Source Universal Remote</a> breadboard layout into a more permanent soldered circuit. I used the <a href="http://octopart.com/ada801-adafruit+industries-27056076">Adafruit Protoboard</a> as a base instead of having a custom circuit board printed, which worked out well. The protoboard is perfectly sized for the RaspberryPi and I highly recommend it for any RaspberryPi related hardware projects.</p>

<p>Below, I&#8217;ve attached some high resolution photographs of the finished protoboard (front and back). I&#8217;ve also created separate versions of the photographs which are fully annotated and explain how all of the components are laid out. Please note that I did make one miscalculation in my circuit which I have corrected with a yellow jumper wire. I&#8217;ve pointed out the miscalculation on both annotated photographs.</p>

<h3>Parts list:</h3>

<ul>
<li><a href="http://octopart.com/ada801-adafruit+industries-27056076">1 Adafruit RaspberryPi Protoboard</a></li>
<li><a href="http://octopart.com/ir333c-everlight-17677690">2 940nm 40deg IR LEDs</a></li>
<li><a href="http://octopart.com/hlmp-5029-avago-549484">2 right angle LED holders</a></li>
<li><a href="http://octopart.com/p2n2222ag-on+semiconductor-358561">1 P2N2222AGOD-ND transistor</a></li>
<li><a href="http://octopart.com/od103je-ohmite-133027">1 10k Ohm resistor</a></li>
<li><a href="http://octopart.com/tsop38238-vishay-11814552">1 TSOP38238 38KHz IR receiver</a></li>
<li><a href="http://www.adafruit.com/products/1311">Hook-up Wire Spool Set - 22AWG Solid Core - 6 x 25 ft</a></li>
<li>RaspberryPi running LIRC (See: <a href="http://alexba.in/blog/2013/01/04/raspberrypi-quickstart/">RaspberryPi Quickstart</a>, <a href="http://alexba.in/blog/2013/01/06/setting-up-lirc-on-the-raspberrypi/">Setting Up LIRC on the RaspberryPi</a>, <a href="http://alexba.in/blog/2013/01/15/installing-nodejs-on-your-raspberrypi/">Installing NodeJS on your RaspberryPi</a>, and <a href="http://alexba.in/blog/2013/02/23/controlling-lirc-from-the-web/">Controlling LIRC from the Web</a>)</li>
</ul>


<h3>Schematic:</h3>

<p><a href="http://upverter.com/alexbain/f24516375cfae8b9/Open-Source-Universal-Remote/#/"><img src="http://upverter.com/alexbain/f24516375cfae8b9/Open-Source-Universal-Remote/embed_img/13715285520000/" alt="Open Source Universal Remote by alexbain f24516375cfae8b9 - Upverter" /></a></p>

<h3>Project pictures:</h3>

<p>All pictures link to a full resolution image (10+ megapixel) which provides plenty of additional resolution for examining the circuit. The annotated photographs should help fill in anything that is unclear. If you have any questions, please leave them in the comments.</p>

<p><a href="/images/posts/protoboard_v1/protoboard_v1_top.jpg"><img src="/images/posts/protoboard_v1/thumb_protoboard_v1_top.jpg" class="center" /></a></p>

<p><a href="/images/posts/protoboard_v1/protoboard_v1_top_annotated.jpg"><img src="/images/posts/protoboard_v1/thumb_protoboard_v1_top_annotated.jpg" class="center" /></a></p>

<p><a href="/images/posts/protoboard_v1/protoboard_v1_bottom.jpg"><img src="/images/posts/protoboard_v1/thumb_protoboard_v1_bottom.jpg" class="center" /></a></p>

<p><a href="/images/posts/protoboard_v1/protoboard_v1_bottom_annotated.jpg"><img src="/images/posts/protoboard_v1/thumb_protoboard_v1_bottom_annotated.jpg" class="center" /></a></p>

<p><a href="/images/posts/protoboard_v1/protoboard_v1_installed_alt.jpg"><img src="/images/posts/protoboard_v1/thumb_protoboard_v1_installed_alt.jpg" class="center" /></a></p>

<p><a href="/images/posts/protoboard_v1/protoboard_v1_installed_back.jpg"><img src="/images/posts/protoboard_v1/thumb_protoboard_v1_installed_back.jpg" class="center" /></a></p>

<p>If you&#8217;d like to read more about this project, here is some further reading:</p>

<ul>
<li><a href="http://alexba.in/blog/2013/03/06/open-source-universal-remote/">Open Source Universal Remote intro</a> - Intro post to the project</li>
<li><a href="http://alexba.in/blog/2013/03/09/raspberrypi-ir-schematic-for-lirc/">RaspberryPi IR Schematic for LIRC</a> - Electrical schematic for the hardware</li>
<li><a href="http://alexba.in/blog/2013/01/06/setting-up-lirc-on-the-raspberrypi/">Setting up LIRC on the RaspberryPi</a> - Installing and configuring IR software</li>
<li><a href="http://alexba.in/blog/2013/02/23/controlling-lirc-from-the-web/">Controlling LIRC From the Web</a> - Installing (mobile/desktop) web interface</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/06/open-terminals-working-directory-in-finder/">Open Terminal&#8217;s Working Directory in Finder</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-06T09:51:00+00:00" pubdate data-updated="true">Jun 6<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/06/06/open-terminals-working-directory-in-finder/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I frequently need to jump from the terminal to Finder in OSX. Turns out there is a very easy way to do that, which I thought I&#8217;d log here in case anyone else is searching for how to do this.</p>

<p>To open the current working directory in Finder, just run:</p>

<pre><code>open .
</code></pre>

<p>Simple, right? The more you know.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/01/using-the-pebble-watch-to-control-your-home-theater/">Using a RaspberryPi and Pebble Watch to Control Your Home Theater</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-01T13:23:00+00:00" pubdate data-updated="true">Jun 1<span>st</span>, 2013</time>
        
         | <a href="/blog/2013/06/01/using-the-pebble-watch-to-control-your-home-theater/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This post will serve as a guide to using a <a href="http://www.raspberrypi.org/">RaspberryPi</a>, a <a href="http://getpebble.com/">Pebble Watch</a>, and an Android phone (<a href="http://www.google.com/nexus/4/">Google Nexus 4</a>) to control your home theater from your wrist. The result is something like this:</p>

<p><img src="/images/posts/open-source-universal-remote-pebble-watch.jpg" height="450px" width="600px" class="center" /></p>

<h3>Introduction</h3>

<p>For a bit of backstory, around eighteen months ago I decided to start experimenting with and teaching myself electronics. I started working with an <a href="http://arduino.cc/en/Main/arduinoBoardUno">Arduino Uno</a> and eventually moved to a <a href="http://www.raspberrypi.org">RasperryPi</a>. I wanted to build open hardware, open source, web connected devices and these seemed like the right tools for the job. I wanted to ensure that every device I built could, down the road, be controlled in entirely new ways with novel human computer interfaces like the <a href="http://getpebble.com">Pebble Watch</a>, <a href="https://www.thalmic.com/myo/?autoplay=true">Thalmic Labs Myo</a>, <a href="http://www.emotiv.com/">Emotiv EPOC EEG Headset</a>, <a href="https://www.leapmotion.com/">Leap Motion</a>, <a href="http://www.google.com/glass/start/">Google Glass</a>, and others.</p>

<p>So, after some consideration, I chose to build a RaspberryPi powered device that controls all of the infrared devices in my home. This project has turned into the <a href="http://opensourceuniversalremote.com">Open Source Universal Remote</a>, an open hardware/open source device you can make yourself with a RaspberryPi and $10 of electronic parts. This post will discuss how I wired up my Pebble Watch to control my Open Source Universal remote using my Android phone.</p>

<p>Let&#8217;s get started!</p>

<h3>Outline</h3>

<ul>
<li>Part 0: How it Works</li>
<li>Part 1: Open Source Universal Remote</li>
<li>Part 2: The Android Phone</li>
<li>Part 3: The Pebble Watch</li>
<li>Part 4: Conclusion / What&#8217;s next</li>
</ul>


<h3>Part 0: How it Works</h3>

<p>At a high level, the project works like this:</p>

<ol>
<li>User taps button on Pebble Watch.</li>
<li>Pebble Watch tells Android phone that a button has been tapped.</li>
<li>Android phone makes web request to Open Source Universal Remote API.</li>
<li>Open Source Universal Remote receives web request and sends out infrared pulses.</li>
<li>Home theater device detects infrared pulses and responds accordingly.</li>
</ol>


<p>I&#8217;ll work backwards from the Open Source Universal Remote to the Pebble Watch.</p>

<h3>Part 1: Open Source Universal Remote</h3>

<p><img src="/images/posts/open-source-universal-remote.jpg" height="320px" width="640px" class="center" /></p>

<p>The foundation of this project is the <a href="http://opensourceuniversalremote.com">Open Source Universal Remote</a>. I won&#8217;t be going into detail about how to make one here, but if you&#8217;re interested in learning more or making your own, here is all the information you need:</p>

<ol>
<li><a href="http://opensourceuniversalremote.com">Open Source Universal Remote</a> - The open source universal remote home page. This is an overview of the project and how it works.</li>
<li><a href="http://alexba.in/blog/2013/01/04/raspberrypi-quickstart/">RaspberryPi QuickStart</a> - A guide I wrote to purchasing and doing the initial configuration on a RaspberryPi.</li>
<li><a href="http://alexba.in/blog/2013/01/06/setting-up-lirc-on-the-raspberrypi/">Setting up LIRC on the RaspberryPi</a> - How to setup and install the <a href="http://lirc.org">Linux Infrared Remote Control (LIRC)</a> software on the RaspberryPi</li>
<li><a href="http://alexba.in/blog/2013/02/23/controlling-lirc-from-the-web/">Controlling LIRC from the Web</a> - How to install and configure two open source projects I wrote (<a href="https://github.com/alexbain/lirc_node">lirc_node</a> and <a href="https://github.com/alexbain/lirc_web">lirc_web</a>) to enable you to control LIRC from the web.</li>
<li><a href="http://alexba.in/blog/2013/06/08/open-source-universal-remote-parts-and-pictures/">Open Source Universal Remote - Parts &amp; Picturse</a> - Finalized parts list and build pictures from a protoboard I soldered together.</li>
</ol>


<p>For this project, I&#8217;ll be using the HTTP based API that the Open Source Universal Remote generates based on the remotes and commands you teach it. Here are the three URLs I used for this project:</p>

<pre><code>http://192.168.1.115:3000/remotes/Yamaha/power
http://192.168.1.115:3000/remotes/Microsoft_xbox360/onoff
http://192.168.1.115:3000/remotes/sonytv/power
</code></pre>

<p>You could get clever and use the hostname of the open source remote, I&#8217;m just using the static IP address here.</p>

<h3>Part 2: The Android Phone</h3>

<p>The second component of this project is an Android phone with the <a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm">Tasker</a> app installed on it. <a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm">Tasker</a> is a great app that provides a rich way to control your Android phone. One of the functions is the ability to send HTTP POST requests to specific URLs, which is the feature we&#8217;ll be using for this project.</p>

<p>Within the Tasker app you&#8217;ll need to create three new tasks, one for each button on the Pebble watch. Each task should be created with a descriptive name (like &#8220;Yamaha Power&#8221;) and will contain a single <code>HTTP POST</code> action (found in the <code>Net</code> menu), which will be sent to the open source remote. Here&#8217;s where the <code>HTTP POST</code> action can be found:</p>

<p><img src="/images/posts/tasker-http-post.jpg" height="640px" width="384px" class="center" /></p>

<p>The <code>HTTP POST</code> action should be setup like this:</p>

<p><img src="/images/posts/tasker-action-example.jpg" height="640px" width="384px" class="center" /></p>

<pre><code># IP / Port of the Open Source Universal Remote
Server:Port   http://192.168.1.115:3000

# Path to the remote/command combo you want to call
Path          /remotes/Yamaha/power
</code></pre>

<p>Once you&#8217;ve created those three Tasks, you&#8217;re ready to setup the Pebble Watch.</p>

<h3>Part 3: Pebble Watch</h3>

<p>The <a href="http://getpebble.com">Pebble Watch</a> was a successful Kickstarter project that launched in 2012. It&#8217;s a smart watch which connects to your cell phone via Bluetooth. It has a software development kit enabling anyone to write apps for the watch. I participated in the Kickstarter project, and have been very excited to start using my watch as a &#8220;remote control for reality.&#8221;</p>

<p>For this project we&#8217;ll be using the Android/Pebble combo app called <a href="https://play.google.com/store/apps/details?id=com.kodek.pebbletasker">PebbleTasker</a>. This is a very straightforward app. You install the app on your phone, which gives you the option to install the PebbleTasker app on the watch.</p>

<p>Once the watch app has been installed, you use the Android app to define which Tasker actions should be assigned to which button. Select the three Tasker actions that you created above and you should be set!</p>

<p><img src="/images/posts/pebble-tasker.jpg" height="640px" width="384px" class="center" /></p>

<p>Here&#8217;s a photograph of my Pebble Watch with the above Tasker actions programmed into the watch:</p>

<p><img src="/images/posts/open-source-universal-remote-pebble-watch-2.jpg" height="450px" width="600px" class="center" /></p>

<h3>Part 4: Conclusion / What&#8217;s Next</h3>

<p>Not to wax too philosophical, but I believe that next generation user interface devices like the Pebble Watch have the potential to transform how humans interact with the digital world. The cell phone was revolutionary - it enabled humans to interact with their data while away from a desktop or laptop computer. Now, devices like the Pebble Watch and the RaspberryPi allow you to move beyond the phone and begin interacting with the digital world in an entirely new way.</p>

<p>As additional web connected devices are made that control lights, garage doors, cars, appliances, and beyond, the interplay between those devices and user interface devices like the Pebble Watch, Myo, Emotiv EPOC, Google Glass, and others are going to give us new and powerful interactions to control the digital and physical world. These interactions were, until now, the stuff of science fiction. These are exciting times we live in.</p>

<p>If you found this post interesting, please subscribe to the <a href="http://feeds.feedburner.com/alexbain">RSS feed</a> to receive future updates or share this post with your social network. If you have any questions, feel free to leave a comment or send me an email (alex[at]thisdomain).</p>

<p>Tune in next time where I&#8217;ll be writing up how to control the Open Source Universal Remote with your mind using an Emotiv EPOC EEG headset.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/14/lirc-web-v0-dot-0-3/">Lirc_web v0.0.3</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-14T13:00:00+00:00" pubdate data-updated="true">Apr 14<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/14/lirc-web-v0-dot-0-3/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>As part of the <a href="http://opensourceuniversalremote.com">Open Source Universal Remote</a> project I&#8217;ve been creating a simple and touch friendly user interface for LIRC. In a previous post I covered <a href="/blog/2013/02/23/controlling-lirc-from-the-web/">Controlling LIRC From the Web</a>, where I introduced version 0.0.1 of <a href="http://github.com/alexbain/lirc_web">lirc_web</a>. Lirc_web is a simple NodeJS app I created for controlling LIRC from the web.</p>

<p>Since then, I&#8217;ve created a set of UI styles and fixed a number of touch related bugs with the project. I&#8217;m excited to announce <a href="http://github.com/alexbain/lirc_web">v0.0.3 of lirc_web</a> which is now on GitHub.</p>

<p>Here is a screen shot of the remote listing page:</p>

<p><img src="/images/posts/universal-remote/lirc_web_v003_remotes.png" class="center" /></p>

<p>Upon tapping on any remote, you&#8217;ll be taken to a page that shows all known commands for that remote:</p>

<p><img src="/images/posts/universal-remote/lirc_web_v003_commands.png" class="center" /></p>

<p>I have a long list of intended improvements, so if you&#8217;re interested in contributing to the project please let me know. As always, if you discover any bugs or have any feedback, please let me know in the comments.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/09/raspberrypi-ir-schematic-for-lirc/">RaspberryPi IR Schematic for LIRC</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-09T09:19:00+00:00" pubdate data-updated="true">Mar 9<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/09/raspberrypi-ir-schematic-for-lirc/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here is a <a href="http://upverter.com/alexbain/f24516375cfae8b9/Open-Source-Universal-Remote/">schematic</a> I designed that demonstrates you how you could create an IR transceiver for your RaspberryPi. You can use this schematic with the <a href="http://lirc.org">LIRC</a> software package to create your own universal remote. It&#8217;s hosted on <a href="http://upverter.com">Upverter</a> and contains a parts list for where to purchase the parts I used.</p>

<p><strong>June 1st, 2013: Thanks to some feedback and experimentation I&#8217;ve updated the schematic. This latest version reflects the best combination of parts I&#8217;ve found so far.</strong></p>

<p><strong>June 3rd, 2013: Two more schematic bugfixes.</strong></p>

<p><strong>June 8th, 2013:</strong> Read about the finished protoboard build in my <a href="http://alexba.in/blog/2013/06/08/open-source-universal-remote-parts-and-pictures/">Open Source Universal Remote - Parts &amp; Picturse</a> blog post.</p>

<p><a href="http://upverter.com/alexbain/f24516375cfae8b9/Open-Source-Universal-Remote/#/"><img src="http://upverter.com/alexbain/f24516375cfae8b9/Open-Source-Universal-Remote/embed_img/13702922880000/" alt="Open Source Universal Remote by alexbain f24516375cfae8b9 - Upverter" /></a></p>

<p><a href="http://upverter.com/alexbain/f24516375cfae8b9/Open-Source-Universal-Remote/#">View the schematic and parts list</a></p>

<p>If you have any suggestions for improvements feel free to tinker on it and submit them.</p>

<p>Interested in installing LIRC on your RaspberryPi? You may be interested in reading <a href="/blog/2013/01/06/setting-up-lirc-on-the-raspberrypi/">Setting up LIRC on the RaspberryPi</a> and <a href="/blog/2013/02/23/controlling-lirc-from-the-web/">Controlling LIRC From the Web</a>.</p>

<p><strong>Update:</strong> Thanks to Steve in the comments for pointing out a few errors I had in the schematic.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/06/open-source-universal-remote/">Open Source Universal Remote</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-06T11:55:00+00:00" pubdate data-updated="true">Mar 6<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/06/open-source-universal-remote/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/posts/universal-remote/transistor.jpg" /></p>

<p>Almost a year ago I decided to teach myself electronics by creating my own WiFi enabled universal remote. Initially I tried to build the project with an Arduino, but later switched to a RaspberryPi. As I&#8217;ve made progress on my project I&#8217;ve open sourced the software I&#8217;ve written and blogged about every step of the process.</p>

<p>To date, I&#8217;ve had over nine thousand unique visitors check out the posts related to this project. Based on the positive feedback I&#8217;ve received and the questions asked, I believe it makes sense to aggregate all of the data I&#8217;ve spread out across numerous blog posts into one guide. Over the coming weeks I&#8217;ll be creating a step by step guide for building your own RaspberryPi powered universal remote. In addition, I&#8217;ll be creating and open sourcing additional components of the project such as a printed circuit board and a 3D printable case to enclose the project.</p>

<p>Check out the <a href="http://opensourceuniversalremote.com">Open Source Universal Remote</a> landing page I created for the project. In the coming weeks I&#8217;ll be adding additional content to that page.</p>

<p>If you have any requests or ideas for this project please don&#8217;t hesitate to ask in the comments. In addition, if you have hardware engineering experience or industrial design experience and would like to contribute please get in touch.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/23/controlling-lirc-from-the-web/">Controlling LIRC From the Web</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-23T13:06:00+00:00" pubdate data-updated="true">Feb 23<span>rd</span>, 2013</time>
        
         | <a href="/blog/2013/02/23/controlling-lirc-from-the-web/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In this post I will cover how to create a web interface + API for <a href="http://lirc.org">LIRC</a>, the Linux Infrared Remote Control project. I will be using NodeJS and a RaspberryPi in this post, but the ideas generalize to other languages and hardware. This post will serve as Part 3 of my open source universal remote project posts. If you haven&#8217;t had an opportunity to read the first two posts, I suggest checking out <a href="/blog/2012/07/08/universal-remote-experiments/">Universal remote experiments</a> (Part 1) and <a href="/blog/2013/01/06/setting-up-lirc-on-the-raspberrypi">Setting up LIRC on the RaspberryPi</a> (Part 2) before proceeding. You may also want to read <a href="/blog/2013/01/15/installing-nodejs-on-your-raspberrypi">Installing NodeJS on your RaspberryPi</a>, where I cover installing NodeJS.</p>

<p>If you&#8217;re completely new to the RaspberryPi and want to learn more I wrote a <a href="/blog/2013/01/04/raspberrypi-quickstart">RaspberryPi Quickstart</a> post which covers everything from purchasing the parts to configuring the WiFi. Check that out if you&#8217;re new to the RaspberryPi ecosystem.</p>

<p>With that out of the way, let&#8217;s get started!</p>

<p><img src="/images/posts/universal-remote/ir-leds.jpg" class="center" /></p>

<h3>Why a web interface + API?</h3>

<p>LIRC is an awesome open source project that handles all of the low level requirements of sending and receiving Infrared commands from a Linux computer. It&#8217;s well documented, well supported, and thanks to the work of the open source community there is now a <code>lirc_rpi</code> driver included in the latest version of RaspbianOS. This means that, as long as you&#8217;re running a RaspberryPi with the latest OS and firmware, LIRC can interface with the RaspberryPi GPIO pins. Fantastic.</p>

<p>Once you have LIRC installed and configured (which I cover in my <a href="/blog/2013/01/06/setting-up-lirc-on-the-raspberrypi">Setting up LIRC on the RaspberryPi</a> post), you can use LIRC executables like <a href="http://www.lirc.org/html/irsend.html">irsend</a> and <a href="http://www.lirc.org/html/irrecord.html">irrecord</a> to send and record IR commands for all your IR devices - right from the command line! This is great fun, but not very user friendly.</p>

<p>I wanted a way to control LIRC from the web. I wanted a web application that enabled me to interact with LIRC from any web connected device. If I had that, I could create a mobile web app for my phone, a regular web app for a desktop, and a RESTful API for web services. The API would give me a way to connect LIRC with any external web service - opening the door for future integrations. All I needed to do was find a way to call LIRC commands from within a web application.</p>

<p>Which brings us to the meat of this post. Getting NodeJS and LIRC to talk.</p>

<p><img src="/images/posts/universal-remote/breadboard-wires.jpg" class="center" /></p>

<h3>Getting LIRC and NodeJS to talk</h3>

<p>To make LIRC usable from the web I needed a client library in a language I could build a web application in. The client library would provide some way to make calls from the web application to LIRC. This would give me the building blocks I needed to build a web application. The usual web languages include PHP, Python, Ruby, and NodeJS.</p>

<p>For this project I chose to work in NodeJS. If you would prefer to implement a web application in a different language, I found two existing LIRC client libraries. Sadly, neither seem maintained. I found <a href="https://github.com/fugalh/lircr">lircr</a> for Ruby and <a href="http://sourceforge.net/projects/pylirc/">pyLirc</a> for Python.</p>

<p>Since I could not find an existing NodeJS LIRC client library, and the existing libraries I did find were not up to date, I built my own. I created <a href="https://github.com/alexbain/lirc_node">lirc_node</a>, a lightweight NodeJS client library that interfaces with LIRC. v0.0.1 of <code>lirc_node</code> only supports <code>irsend</code>. This allows you to send IR commands to devices that LIRC knows about.</p>

<p>Before trying to install and use <code>lirc_node</code> make sure you have completed these steps:</p>

<ul>
<li>Purchased, setup, and configured a RaspberryPi to join a network</li>
<li>Wired up an IR LED and an IR Receiver to your RaspberryPi</li>
<li>Installed and configured LIRC to interface with your IR LED and IR Receiver</li>
<li>Programmed LIRC to understand your remote controls</li>
<li>Installed NodeJS on your RaspberryPi</li>
</ul>


<p>If you have not completed all of those steps scroll back to the top of this post and check out my earlier posts. I have written detailed step by step guides to get you through each of those steps.</p>

<p>All caught up? Great! We&#8217;re ready to install a basic web application for LIRC.</p>

<p><img src="/images/posts/universal-remote/ir-receiver.jpg" class="center" /></p>

<h3>Creating a NodeJS web application using <code>lirc_node</code> and <code>lirc_web</code></h3>

<p>The easiest way to setup a NodeJS web application using <code>lirc_node</code> is to use v0.0.1 of <a href="https://github.com/alexbain/lirc_web">lirc_web</a>, a sample NodeJS application I wrote as a proof of concept for <code>lirc_node</code>. This web application is extremely basic, and only proves that <code>lirc_node</code> works. I have plans to grow this application with additional functionality and an improved interface. You may also use the basic API included in this web application to connect your universal remote with services like <a href="https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm&amp;hl=en">Tasker</a> or <a href="https://ifttt.com/">IFTTT</a>.</p>

<p>To download and install <a href="https://github.com/alexbain/lirc_web">lirc_web</a>:</p>

<pre><code>wget https://github.com/alexbain/lirc_web/archive/master.zip
unzip master.zip
mv lirc_web-master lirc_web
rm master.zip
cd lirc_web
npm install
node app.js
</code></pre>

<p>That should do it. Now, visit <code>http://raspberrypi:3000/</code> (or the IP address of your RaspberryPi) to confirm the sample web application shows all of the remotes and commands LIRC knows about. Clicking any of the links will tell LIRC to send that IR command via the API endpoint.</p>

<p><img src="/images/posts/universal-remote/lirc_web.jpg" class="center" /></p>

<p><strong>November 2nd 2013 Update:</strong> I have posted a follow up post that discusses how to ensure the <code>lirc_web</code> project automatically starts on boot and is accessible via port 80. Check out <a href="http://alexba.in/blog/2013/11/02/lirc-web-nginx-and-upstart/">Running lirc_web with Nginx and Upstart</a> to learn more.</p>

<h3>Success!</h3>

<p>At this point, assuming you&#8217;ve been able to get each step working, you should have a web application you can use to control any IR device that LIRC knows about.</p>

<h3>What&#8217;s next?</h3>

<p>In the coming months I hope to:</p>

<ul>
<li>Create an open hardware schematic and PCB board that anyone can use for the hardware.</li>
<li>3D print an enclosure for the RaspberryPi + expansion board.</li>
<li>Improve the web application and give it a proper mobile web interface.</li>
<li>Write about how to connect <a href="https://github.com/alexbain/lirc_web">lirc_web</a> to Tasker or IFTTT.</li>
</ul>


<p>If you have any questions, suggestions, or run into any issues - please let me know.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/01/15/installing-nodejs-on-your-raspberrypi/">Installing NodeJS on Your RaspberryPi</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-15T12:04:00+00:00" pubdate data-updated="true">Jan 15<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/01/15/installing-nodejs-on-your-raspberrypi/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here&#8217;s how I installed <a href="http://nodejs.org/">NodeJS</a> on my RaspberryPi:</p>

<h3>Upgrade to the latest OS / Firmware</h3>

<p>If you have not already upgraded to the latest version of Raspbian OS and the
latest RaspberryPi firmware, I recommend following my <a href="http://alexba.in/blog/2013/01/04/raspberrypi-quickstart/">RaspberryPi Quickstart</a>.</p>

<h3>Getting and Compiling NodeJS</h3>

<p>Once your RaspberryPi is up to date, here&#8217;s how to download and compile NodeJS:</p>

<pre><code># Install some prerequisites
sudo apt-get install python g++ make

# Grab the latest version of NodeJS
mkdir ~/nodejs &amp;&amp; cd $_
wget -N http://nodejs.org/dist/node-latest.tar.gz
tar xzvf node-latest.tar.gz &amp;&amp; cd `ls -rd node-v*`

# Compile and install to your RaspberryPi
./configure
make
sudo make install
</code></pre>

<p>Please note that it takes about two hours to compile NodeJS.</p>

<h3>Confirming Installation</h3>

<p>You can confirm that NodeJS was installed correctly by running:</p>

<pre><code>node -v
npm --help
</code></pre>

<p>That&#8217;s it! You&#8217;re ready to begin development.</p>

<h3>Additional Reading:</h3>

<p>If you&#8217;d like to do some additional reading about NodeJS or ways to access the
GPIO pins on the RaspberryPi, check out:</p>

<ul>
<li><a href="http://nodejs.org/">NodeJS</a> - NodeJS home page</li>
<li><a href="https://github.com/rakeshpai/pi-gpio">pi-gpio</a> - &#8220;node.js based library to help access the GPIO of the Raspberry Pi&#8221;</li>
<li><a href="https://github.com/EnotionZ/GpiO">GpiO</a> - &#8220;Talk to your Raspberry Pi&#8217;s GPIO&#8221;</li>
</ul>


<p>If you have any other recommended resources please let me know!</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/11/02/lirc-web-nginx-and-upstart/">Running lirc_web with nginx and upstart</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/21/lirc-web-v0-0-5/">lirc_web v0.0.5</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/08/open-source-universal-remote-parts-and-pictures/">Open Source Universal Remote - Parts &amp; Pictures</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/06/open-terminals-working-directory-in-finder/">Open terminal&#8217;s working directory in Finder</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/01/using-the-pebble-watch-to-control-your-home-theater/">Using a RaspberryPi and Pebble Watch to control your home theater</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/alexbain">@alexbain</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'alexbain',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("alexsbain", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/alexsbain" class="twitter-follow-button" data-show-count="false">Follow @alexsbain</a>
  
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/116699909866105170494?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Alex Bain -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'alexbain';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
